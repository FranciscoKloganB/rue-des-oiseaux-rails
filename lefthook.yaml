commit-msg:
  commands:
    lint-commit-msg:
      run: npx commitlint --config commitlint.config.mjs --edit {1}

pre-commit:
  parallel: false
  piped: true
  commands:
    lint-affected-prettier:
      priority: 1
      glob: '*.{cjs,js,mjs,ts}'
      run: npx prettier --write {staged_files}
      stage_fixed: true
    lint-affected-eslint:
      priority: 2
      glob: '*.{cjs,js,mjs,ts}'
      run: npx eslint --fix {staged_files}
      stage_fixed: true

pre-push:
  parallel: true
  commands:
    build:
      run: npm run build
    test-unit:
      run: npm run test
    typecheck:
      run: npm run typecheck

post-merge:
  parallel: false
  commands:
    install-deps:
      run: npm install

output:
  - empty_summary
  - summary
  - skips
